"use strict";(globalThis.webpackChunkq4_hackathon=globalThis.webpackChunkq4_hackathon||[]).push([[6611],{8393:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>p,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"module1-ros2/lesson2-ros2-nodes-topics","title":"Lesson 2 - ROS 2 Nodes and Topics","description":"Overview","source":"@site/docs/module1-ros2/lesson2-ros2-nodes-topics.md","sourceDirName":"module1-ros2","slug":"/module1-ros2/lesson2-ros2-nodes-topics","permalink":"/Q4-hackathon1/docs/module1-ros2/lesson2-ros2-nodes-topics","draft":false,"unlisted":false,"editUrl":"https://github.com/iffatmumtaz/Q4-hackathon1/edit/main/docs/module1-ros2/lesson2-ros2-nodes-topics.md","tags":[],"version":"current","frontMatter":{"sidebar_label":"Nodes, Topics, and Communication","title":"Lesson 2 - ROS 2 Nodes and Topics"},"sidebar":"tutorialSidebar","previous":{"title":"Introduction to ROS 2","permalink":"/Q4-hackathon1/docs/module1-ros2/lesson1-ros2-basics"},"next":{"title":"Actions and Services","permalink":"/Q4-hackathon1/docs/module1-ros2/lesson3-ros2-actions-services"}}');var r=s(4848),o=s(8453);const t={sidebar_label:"Nodes, Topics, and Communication",title:"Lesson 2 - ROS 2 Nodes and Topics"},l="Lesson 2: Understanding Nodes, Topics, and Communication Patterns",a={},c=[{value:"Overview",id:"overview",level:2},{value:"Learning Goals",id:"learning-goals",level:2},{value:"Concepts",id:"concepts",level:2},{value:"Nodes",id:"nodes",level:3},{value:"Topics",id:"topics",level:3},{value:"Publishers and Subscribers",id:"publishers-and-subscribers",level:3},{value:"Quality of Service (QoS)",id:"quality-of-service-qos",level:3},{value:"Steps",id:"steps",level:2},{value:"Step 1: Create a Custom Package",id:"step-1-create-a-custom-package",level:3},{value:"Step 2: Create a Publisher Node",id:"step-2-create-a-publisher-node",level:3},{value:"Step 3: Create a Subscriber Node",id:"step-3-create-a-subscriber-node",level:3},{value:"Step 4: Update setup.py",id:"step-4-update-setuppy",level:3},{value:"Step 5: Build and Run the Package",id:"step-5-build-and-run-the-package",level:3},{value:"Code",id:"code",level:2},{value:"Complete Publisher Example with Error Handling:",id:"complete-publisher-example-with-error-handling",level:3},{value:"Examples",id:"examples",level:2},{value:"Using ROS 2 Command Line Tools",id:"using-ros-2-command-line-tools",level:3},{value:"Multiple Publishers Example",id:"multiple-publishers-example",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Required Tools &amp; Software",id:"required-tools--software",level:2},{value:"Expected Outcome",id:"expected-outcome",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"lesson-2-understanding-nodes-topics-and-communication-patterns",children:"Lesson 2: Understanding Nodes, Topics, and Communication Patterns"})}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"This lesson dives deeper into the core communication mechanisms in ROS 2. You'll learn about nodes, topics, publishers, subscribers, and how they work together to create distributed robotic systems."}),"\n",(0,r.jsx)(n.h2,{id:"learning-goals",children:"Learning Goals"}),"\n",(0,r.jsx)(n.p,{children:"By the end of this lesson, you will be able to:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Create custom ROS 2 nodes with publishers and subscribers"}),"\n",(0,r.jsx)(n.li,{children:"Understand the publisher-subscriber communication pattern"}),"\n",(0,r.jsx)(n.li,{children:"Implement message passing between nodes"}),"\n",(0,r.jsx)(n.li,{children:"Use ROS 2 tools to inspect and debug communication"}),"\n",(0,r.jsx)(n.li,{children:"Design simple distributed systems using ROS 2 concepts"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"concepts",children:"Concepts"}),"\n",(0,r.jsx)(n.h3,{id:"nodes",children:"Nodes"}),"\n",(0,r.jsx)(n.p,{children:"Nodes are the fundamental building blocks of ROS 2. Each node is a process that performs computation. Multiple nodes work together to form a complete robotic application."}),"\n",(0,r.jsx)(n.h3,{id:"topics",children:"Topics"}),"\n",(0,r.jsx)(n.p,{children:"Topics are named buses over which nodes exchange messages. They implement a publish-subscribe communication pattern where publishers send data and subscribers receive it."}),"\n",(0,r.jsx)(n.h3,{id:"publishers-and-subscribers",children:"Publishers and Subscribers"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Publishers"})," send messages to a topic"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Subscribers"})," receive messages from a topic"]}),"\n",(0,r.jsx)(n.li,{children:"Multiple publishers and subscribers can exist for the same topic"}),"\n",(0,r.jsx)(n.li,{children:"Communication is asynchronous and decoupled"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"quality-of-service-qos",children:"Quality of Service (QoS)"}),"\n",(0,r.jsx)(n.p,{children:"QoS settings control how messages are delivered, including reliability, durability, and history policies."}),"\n",(0,r.jsx)(n.h2,{id:"steps",children:"Steps"}),"\n",(0,r.jsx)(n.h3,{id:"step-1-create-a-custom-package",children:"Step 1: Create a Custom Package"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Navigate to your workspace\ncd ~/ros2_ws/src\n\n# Create a new package for our examples\nros2 pkg create --build-type ament_python my_robot_interfaces\n\n# Navigate to the package directory\ncd my_robot_interfaces\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-2-create-a-publisher-node",children:"Step 2: Create a Publisher Node"}),"\n",(0,r.jsxs)(n.p,{children:["Create a new file ",(0,r.jsx)(n.code,{children:"my_robot_interfaces/my_robot_interfaces/publisher.py"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'#!/usr/bin/env python3\n\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\nimport time\n\n\nclass RobotPublisher(Node):\n\n    def __init__(self):\n        super().__init__(\'robot_publisher\')\n        self.publisher = self.create_publisher(String, \'robot_commands\', 10)\n        self.timer = self.create_timer(1.0, self.publish_command)\n        self.command_index = 0\n        self.commands = [\n            "MOVE_FORWARD",\n            "TURN_LEFT",\n            "MOVE_BACKWARD",\n            "TURN_RIGHT",\n            "STOP"\n        ]\n\n    def publish_command(self):\n        msg = String()\n        msg.data = self.commands[self.command_index % len(self.commands)]\n        self.publisher.publish(msg)\n        self.get_logger().info(f\'Publishing: {msg.data}\')\n        self.command_index += 1\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n    publisher = RobotPublisher()\n\n    try:\n        rclpy.spin(publisher)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        publisher.destroy_node()\n        rclpy.shutdown()\n\n\nif __name__ == \'__main__\':\n    main()\n'})}),"\n",(0,r.jsx)(n.h3,{id:"step-3-create-a-subscriber-node",children:"Step 3: Create a Subscriber Node"}),"\n",(0,r.jsxs)(n.p,{children:["Create a new file ",(0,r.jsx)(n.code,{children:"my_robot_interfaces/my_robot_interfaces/subscriber.py"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\n\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\n\nclass RobotSubscriber(Node):\n\n    def __init__(self):\n        super().__init__('robot_subscriber')\n        self.subscription = self.create_subscription(\n            String,\n            'robot_commands',\n            self.command_callback,\n            10\n        )\n        self.subscription  # Prevent unused variable warning\n        self.get_logger().info('Robot subscriber node initialized')\n\n    def command_callback(self, msg):\n        self.get_logger().info(f'Received command: {msg.data}')\n        # Here you would typically implement the command execution logic\n        self.execute_command(msg.data)\n\n    def execute_command(self, command):\n        # Simulate command execution\n        if command == \"MOVE_FORWARD\":\n            self.get_logger().info('Moving robot forward...')\n        elif command == \"TURN_LEFT\":\n            self.get_logger().info('Turning robot left...')\n        elif command == \"MOVE_BACKWARD\":\n            self.get_logger().info('Moving robot backward...')\n        elif command == \"TURN_RIGHT\":\n            self.get_logger().info('Turning robot right...')\n        elif command == \"STOP\":\n            self.get_logger().info('Stopping robot...')\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n    subscriber = RobotSubscriber()\n\n    try:\n        rclpy.spin(subscriber)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        subscriber.destroy_node()\n        rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-4-update-setuppy",children:"Step 4: Update setup.py"}),"\n",(0,r.jsxs)(n.p,{children:["Update ",(0,r.jsx)(n.code,{children:"my_robot_interfaces/setup.py"})," to make your nodes executable:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from setuptools import setup\n\npackage_name = 'my_robot_interfaces'\n\nsetup(\n    name=package_name,\n    version='0.0.0',\n    packages=[package_name],\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n    ],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    maintainer='Your Name',\n    maintainer_email='your.email@example.com',\n    description='Examples for ROS 2 nodes and topics',\n    license='Apache License 2.0',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            'robot_publisher = my_robot_interfaces.publisher:main',\n            'robot_subscriber = my_robot_interfaces.subscriber:main',\n        ],\n    },\n)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-5-build-and-run-the-package",children:"Step 5: Build and Run the Package"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Go back to the workspace root\ncd ~/ros2_ws\n\n# Source ROS 2 and build the package\nsource /opt/ros/humble/setup.bash\ncolcon build --packages-select my_robot_interfaces\n\n# Source the workspace\nsource install/setup.bash\n\n# Run the publisher in one terminal\nros2 run my_robot_interfaces robot_publisher\n\n# Run the subscriber in another terminal\nros2 run my_robot_interfaces robot_subscriber\n"})}),"\n",(0,r.jsx)(n.h2,{id:"code",children:"Code"}),"\n",(0,r.jsx)(n.h3,{id:"complete-publisher-example-with-error-handling",children:"Complete Publisher Example with Error Handling:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\n\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\nfrom rclpy.qos import QoSProfile, ReliabilityPolicy, DurabilityPolicy\n\n\nclass RobustPublisher(Node):\n\n    def __init__(self):\n        super().__init__('robust_publisher')\n\n        # Create a QoS profile for reliable communication\n        qos_profile = QoSProfile(\n            depth=10,\n            reliability=ReliabilityPolicy.RELIABLE,\n            durability=DurabilityPolicy.VOLATILE\n        )\n\n        self.publisher = self.create_publisher(String, 'robot_commands', qos_profile)\n        self.timer = self.create_timer(0.5, self.publish_command)\n        self.command_counter = 0\n\n    def publish_command(self):\n        msg = String()\n        msg.data = f'Command #{self.command_counter}: MOVE_FORWARD'\n        self.publisher.publish(msg)\n        self.get_logger().info(f'Published: {msg.data}')\n        self.command_counter += 1\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    try:\n        publisher = RobustPublisher()\n        rclpy.spin(publisher)\n    except KeyboardInterrupt:\n        print('Publisher interrupted by user')\n    except Exception as e:\n        print(f'Publisher error: {e}')\n    finally:\n        publisher.destroy_node()\n        rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(n.h3,{id:"using-ros-2-command-line-tools",children:"Using ROS 2 Command Line Tools"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# List all active topics\nros2 topic list\n\n# Get information about a specific topic\nros2 topic info /robot_commands\n\n# Echo messages from a topic (like our subscriber)\nros2 topic echo /robot_commands data\n\n# Publish a single message to a topic\nros2 topic pub /robot_commands std_msgs/msg/String \"data: 'MANUAL_COMMAND'\"\n\n# Show bandwidth usage of topics\nros2 topic bw\n\n# Show the rate of messages on topics\nros2 topic hz /robot_commands\n"})}),"\n",(0,r.jsx)(n.h3,{id:"multiple-publishers-example",children:"Multiple Publishers Example"}),"\n",(0,r.jsx)(n.p,{children:"You can have multiple publishers for the same topic:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# publisher_1.py\n#!/usr/bin/env python3\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass Publisher1(Node):\n    def __init__(self):\n        super().__init__('publisher_1')\n        self.publisher = self.create_publisher(String, 'multi_topic', 10)\n        self.timer = self.create_timer(2.0, self.publish_data)\n\n    def publish_data(self):\n        msg = String()\n        msg.data = 'Data from Publisher 1'\n        self.publisher.publish(msg)\n        self.get_logger().info(f'P1: {msg.data}')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = Publisher1()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n"})}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use appropriate QoS settings"})," based on your application requirements"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Handle node lifecycle properly"})," with try/finally blocks"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use descriptive topic names"})," that clearly indicate their purpose"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Implement proper error handling"})," for robust applications"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Test communication patterns"})," with ROS 2 command-line tools"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use consistent message types"})," for predictable communication"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Consider message frequency"})," to avoid overwhelming the system"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Implement logging"})," for debugging and monitoring"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"required-tools--software",children:"Required Tools & Software"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ROS 2 Distribution"}),": ROS 2 Humble Hawksbill (or newer LTS)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Python"}),": Version 3.8 or higher"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Development Environment"}),": Terminal, Text Editor or IDE"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"System Requirements"}),": At least 4GB RAM, 20GB free disk space"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Additional Tools"}),": colcon build system, ament build system"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"expected-outcome",children:"Expected Outcome"}),"\n",(0,r.jsx)(n.p,{children:"After completing this lesson, you should:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Understand how nodes, topics, publishers, and subscribers work"}),"\n",(0,r.jsx)(n.li,{children:"Be able to create custom ROS 2 packages with communication nodes"}),"\n",(0,r.jsx)(n.li,{children:"Use ROS 2 command-line tools to inspect and debug communication"}),"\n",(0,r.jsx)(n.li,{children:"Implement robust publisher-subscriber patterns with proper error handling"}),"\n",(0,r.jsx)(n.li,{children:"Have a foundation for more complex communication patterns in ROS 2"}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>l});var i=s(6540);const r={},o=i.createContext(r);function t(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);